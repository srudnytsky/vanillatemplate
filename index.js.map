{"version":3,"file":"index.js","sources":["../src/js/main.js"],"sourcesContent":["document.addEventListener('DOMContentLoaded', () => {\n  // === MOBILE MENU ===\n  const menuToggle = document.querySelector('.menu-toggle');\n  const mobileMenu = document.querySelector('.mobile-menu');\n  const menuClose = document.querySelector('.mobile-menu-close');\n  \n  if (menuToggle && mobileMenu && menuClose) {\n    menuToggle.addEventListener('click', () => {\n      mobileMenu.classList.add('active');\n      document.body.style.overflow = 'hidden';\n    });\n    \n    menuClose.addEventListener('click', () => {\n      mobileMenu.classList.remove('active');\n      document.body.style.overflow = '';\n    });\n    \n    mobileMenu.querySelectorAll('.mobile-menu-link').forEach(link => {\n      link.addEventListener('click', () => {\n        mobileMenu.classList.remove('active');\n        document.body.style.overflow = '';\n      });\n    });\n  }\n\n  // === MAIN APP LOGIC ===\n  const API_BASE = 'https://your-energy.b.goit.study/api';\n\n  const grid = document.getElementById('exercises-grid');\n  const pagination = document.getElementById('pagination');\n  const tabs = document.querySelectorAll('.tab-btn');\n  const quoteText = document.querySelector('.quote-text');\n  const quoteAuthor = document.querySelector('.quote-author');\n  const subscribeForm = document.getElementById('subscribe-form');\n  const categoryTitle = document.getElementById('current-category');\n  const searchInput = document.getElementById('exercise-search');\n  const searchBtn = document.getElementById('search-btn');\n\n  let currentPage = 1;\n  const limit = 12;\n  let selectedCategory = null;\n  let currentFilterType = null;\n  let searchQuery = '';\n  let currentExercise = null; // Добавлено для хранения текущего упражнения\n\n  // === FAVORITES FUNCTIONS ===\n  function getFavorites() {\n    try {\n      return JSON.parse(localStorage.getItem('favorites')) || [];\n    } catch {\n      return [];\n    }\n  }\n\n  function saveFavorites(favorites) {\n    localStorage.setItem('favorites', JSON.stringify(favorites));\n  }\n\n  function isFavorite(exerciseId) {\n    const favorites = getFavorites();\n    return favorites.some(fav => fav._id === exerciseId);\n  }\n\n  function updateFavoriteButton(exerciseId) {\n    const addFavoritesBtn = document.getElementById('modal-add-favorites');\n    if (!addFavoritesBtn) return;\n    \n    if (isFavorite(exerciseId)) {\n      addFavoritesBtn.innerHTML = 'Remove from favorites ♥';\n      addFavoritesBtn.style.color = '#EEA10C';\n      addFavoritesBtn.style.borderColor = '#EEA10C';\n    } else {\n      addFavoritesBtn.innerHTML = 'Add to favorites ♡';\n      addFavoritesBtn.style.color = '#F4F4F4';\n      addFavoritesBtn.style.borderColor = 'rgba(244, 244, 244, 0.2)';\n    }\n  }\n\n  // === RATING MODAL FUNCTIONS ===\n  let selectedRating = 0;\n\n  function openRatingModal() {\n    const ratingModal = document.getElementById('rating-modal');\n    if (!ratingModal) return;\n    \n    closeExerciseModal();\n    ratingModal.classList.add('active');\n    document.body.style.overflow = 'hidden';\n    selectedRating = 0;\n    updateRatingStars(0);\n    \n    const ratingCurrent = document.querySelector('.rating-current');\n    if (ratingCurrent) ratingCurrent.textContent = '0.0';\n    \n    const ratingForm = document.getElementById('rating-form');\n    if (ratingForm) ratingForm.reset();\n  }\n\n  function closeRatingModal() {\n    const ratingModal = document.getElementById('rating-modal');\n    if (ratingModal) {\n      ratingModal.classList.remove('active');\n      document.body.style.overflow = '';\n    }\n  }\n\n  function updateRatingStars(rating) {\n    const ratingStarsInput = document.querySelectorAll('.star-input');\n    ratingStarsInput.forEach((star, index) => {\n      const starValue = parseFloat(star.getAttribute('data-rating'));\n      if (starValue <= rating) {\n        star.classList.add('active');\n        star.textContent = '⭐';\n      } else {\n        star.classList.remove('active');\n        star.textContent = '☆';\n      }\n    });\n  }\n\n  // === Load daily quote ===\n  async function loadQuote() {\n    try {\n      const res = await fetch(`${API_BASE}/quote`);\n      if (!res.ok) throw new Error('Network error');\n      const data = await res.json();\n      if (data?.quote && data?.author) {\n        quoteText.textContent = data.quote;\n        quoteAuthor.textContent = data.author;\n      } else {\n        quoteText.textContent = \"Quote not available\";\n        quoteAuthor.textContent = \"\";\n      }\n    } catch (err) {\n      console.error('Error loading quote:', err);\n      quoteText.textContent = \"Failed to load quote\";\n    }\n  }\n\n  // === Load category list ===\n  async function loadFilters(filterName = 'Body parts') {\n    try {\n      grid.innerHTML = 'Loading categories...';\n      grid.classList.add('category-grid');\n      pagination.innerHTML = '';\n      if (categoryTitle) categoryTitle.textContent = '';\n\n      const encodedFilter = encodeURIComponent(filterName);\n      const res = await fetch(`${API_BASE}/filters?filter=${encodedFilter}&page=${currentPage}&limit=${limit}`);\n      if (!res.ok) throw new Error('Error loading filters');\n      \n      const data = await res.json();\n\n      if (data?.results?.length > 0) {\n        const typeMap = {\n          'Body parts': 'bodyPart',\n          'Muscles': 'muscles',\n          'Equipment': 'equipment'\n        };\n        currentFilterType = typeMap[filterName] || 'bodyPart';\n        renderCategories(data.results, filterName);\n        renderPagination(data.totalPages);\n      } else {\n        grid.innerHTML = 'Categories not found';\n      }\n    } catch (err) {\n      console.error('Error loading categories:', err);\n      grid.innerHTML = 'Error loading categories';\n    }\n  }\n\n  // === Display category cards ===\n  function renderCategories(items, filterName) {\n    grid.innerHTML = '';\n    items.forEach(item => {\n      const card = document.createElement('div');\n      card.className = 'exercise-card';\n\n      const apiValue = item.name.toLowerCase().replace(/\\s+/g, '-');\n      const imgURL = item.imgURL || '';\n\n      card.innerHTML = `\n        <img src=\"${imgURL}\" alt=\"${item.name}\" loading=\"lazy\" onerror=\"this.src='https://via.placeholder.com/300x300?text=No+Image'\">\n        <div class=\"exercise-overlay\">\n          <h3>${item.name}</h3>\n          <div class=\"category\">${filterName}</div>\n        </div>\n      `;\n\n      card.addEventListener('click', () => {\n        selectedCategory = apiValue;\n        currentPage = 1;\n        if (categoryTitle) categoryTitle.textContent = item.name;\n        loadExercises();\n      });\n\n      grid.appendChild(card);\n    });\n  }\n\n  // === Load exercises by selected category ===\n  async function loadExercises() {\n    if (!selectedCategory || !currentFilterType) return;\n\n    try {\n      grid.innerHTML = 'Loading exercises...';\n      grid.classList.remove('category-grid');\n      pagination.innerHTML = '';\n\n      const params = new URLSearchParams({\n        [currentFilterType]: selectedCategory,\n        page: currentPage,\n        limit: limit\n      });\n\n      if (searchQuery) {\n        params.append('keyword', searchQuery);\n      }\n\n      const res = await fetch(`${API_BASE}/exercises?${params.toString()}`);\n      if (!res.ok) throw new Error('Error loading exercises');\n\n      const data = await res.json();\n\n      if (data?.results?.length > 0) {\n        renderExercises(data.results);\n        renderPagination(data.totalPages);\n      } else {\n        grid.innerHTML = '<p style=\"text-align: center; padding: 40px;\">No exercises found</p>';\n      }\n    } catch (err) {\n      console.error('Error loading exercises:', err);\n      grid.innerHTML = 'Error loading exercises';\n    }\n  }\n\n  // === Display exercises in horizontal card format ===\n  function renderExercises(exercises) {\n    grid.innerHTML = '';\n\n    const backBtn = document.createElement('button');\n    backBtn.textContent = '← Back to categories';\n    backBtn.className = 'back-btn';\n    backBtn.addEventListener('click', () => {\n      selectedCategory = null;\n      currentPage = 1;\n      searchQuery = '';\n      if (searchInput) searchInput.value = '';\n      if (categoryTitle) categoryTitle.textContent = '';\n      const activeTab = document.querySelector('.tab-btn.active');\n      const filterName = activeTab ? activeTab.textContent.trim() : 'Body parts';\n      loadFilters(filterName);\n    });\n    grid.appendChild(backBtn);\n\n    exercises.forEach(ex => {\n      const card = document.createElement('div');\n      card.className = 'exercise-card-horizontal';\n\n      const rating = ex.rating || 0;\n      const fullStars = Math.floor(rating);\n      const halfStar = rating % 1 >= 0.5;\n\n      card.innerHTML = `\n        <div class=\"exercise-card-left\">\n          <div class=\"workout-badge\">\n            WORKOUT ${rating.toFixed(1)} ⭐\n          </div>\n          <div class=\"exercise-info\">\n            <h3>${ex.name}</h3>\n            <div class=\"exercise-details\">\n              <span><span class=\"label\">Burned calories:</span> ${ex.burnedCalories || 0} / ${ex.time || 0} min</span>\n              <span><span class=\"label\">Body part:</span> ${ex.bodyPart || ''}</span>\n              <span><span class=\"label\">Target:</span> ${ex.target || ''}</span>\n            </div>\n          </div>\n        </div>\n        <button class=\"start-btn\">\n          Start\n          <svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"none\">\n            <path d=\"M12.172 7L6.808 1.636L8.222 0.222L16 8L8.222 15.778L6.808 14.364L12.172 9H0V7H12.172Z\" fill=\"currentColor\"/>\n          </svg>\n        </button>\n      `;\n\n      const startBtn = card.querySelector('.start-btn');\n      startBtn.addEventListener('click', (e) => {\n        e.stopPropagation();\n        openExerciseModal(ex);\n      });\n\n      grid.appendChild(card);\n    });\n  }\n\n  // === Open Exercise Modal ===\n  function openExerciseModal(exercise) {\n    const modal = document.getElementById('exercise-modal');\n    if (!modal) return;\n\n    currentExercise = exercise; // Сохраняем текущее упражнение\n\n    const modalImg = document.getElementById('modal-exercise-img');\n    const modalName = document.getElementById('modal-exercise-name');\n    const modalRating = document.getElementById('modal-rating-stars');\n    const modalTarget = document.getElementById('modal-target');\n    const modalBodyPart = document.getElementById('modal-body-part');\n    const modalEquipment = document.getElementById('modal-equipment');\n    const modalPopularity = document.getElementById('modal-popularity');\n    const modalCalories = document.getElementById('modal-calories');\n    const modalDescription = document.getElementById('modal-description-text');\n\n    if (modalImg) modalImg.src = exercise.gifUrl || 'https://via.placeholder.com/300x300?text=Exercise';\n    if (modalName) modalName.textContent = exercise.name || '';\n    \n    const rating = exercise.rating || 0;\n    const fullStars = Math.floor(rating);\n    const hasHalfStar = rating % 1 >= 0.5;\n    let starsDisplay = `${rating.toFixed(1)} `;\n    for (let i = 0; i < 5; i++) {\n      if (i < fullStars) {\n        starsDisplay += '⭐';\n      } else if (i === fullStars && hasHalfStar) {\n        starsDisplay += '⭐';\n      } else {\n        starsDisplay += '☆';\n      }\n    }\n    if (modalRating) modalRating.textContent = starsDisplay;\n    \n    if (modalTarget) modalTarget.textContent = exercise.target || '';\n    if (modalBodyPart) modalBodyPart.textContent = exercise.bodyPart || '';\n    if (modalEquipment) modalEquipment.textContent = exercise.equipment || '';\n    if (modalPopularity) modalPopularity.textContent = exercise.popularity || '0';\n    if (modalCalories) modalCalories.textContent = `${exercise.burnedCalories || 0}/${exercise.time || 0} min`;\n    if (modalDescription) modalDescription.textContent = exercise.description || 'No description available.';\n\n    updateFavoriteButton(exercise._id);\n\n    modal.classList.add('active');\n    document.body.style.overflow = 'hidden';\n  }\n\n  // === Close Exercise Modal ===\n  function closeExerciseModal() {\n    const modal = document.getElementById('exercise-modal');\n    if (modal) {\n      modal.classList.remove('active');\n      document.body.style.overflow = '';\n    }\n  }\n\n  // === Modal event listeners ===\n  const modalCloseBtn = document.getElementById('modal-close');\n  const modalOverlay = document.querySelector('.modal-overlay');\n  \n  if (modalCloseBtn) {\n    modalCloseBtn.addEventListener('click', closeExerciseModal);\n  }\n  \n  if (modalOverlay) {\n    modalOverlay.addEventListener('click', (e) => {\n      if (e.target === modalOverlay) {\n        closeExerciseModal();\n        closeRatingModal();\n      }\n    });\n  }\n\n  // Close modal on Escape key\n  document.addEventListener('keydown', (e) => {\n    if (e.key === 'Escape') {\n      closeExerciseModal();\n      closeRatingModal();\n    }\n  });\n\n  // === Favorites button functionality ===\n  const addFavoritesBtn = document.getElementById('modal-add-favorites');\n  if (addFavoritesBtn) {\n    addFavoritesBtn.addEventListener('click', () => {\n      if (!currentExercise) {\n        alert('No exercise selected');\n        return;\n      }\n\n      const favorites = getFavorites();\n      const exerciseId = currentExercise._id;\n      const favoriteIndex = favorites.findIndex(fav => fav._id === exerciseId);\n\n      if (favoriteIndex > -1) {\n        favorites.splice(favoriteIndex, 1);\n        saveFavorites(favorites);\n        updateFavoriteButton(exerciseId);\n        alert('Removed from favorites!');\n      } else {\n        favorites.push(currentExercise);\n        saveFavorites(favorites);\n        updateFavoriteButton(exerciseId);\n        alert('Added to favorites!');\n      }\n    });\n  }\n\n  // === Rating button functionality ===\n  const giveRatingBtn = document.getElementById('modal-give-rating');\n  if (giveRatingBtn) {\n    giveRatingBtn.addEventListener('click', () => {\n      if (!currentExercise) {\n        alert('No exercise selected');\n        return;\n      }\n      openRatingModal();\n    });\n  }\n\n  // === Rating modal stars functionality ===\n  const ratingStarsInput = document.querySelectorAll('.star-input');\n  const ratingCurrent = document.querySelector('.rating-current');\n  const ratingStarsContainer = document.querySelector('.rating-stars-input');\n  const ratingModalClose = document.getElementById('rating-modal-close');\n  const ratingForm = document.getElementById('rating-form');\n\n  // Star click handlers\n  ratingStarsInput.forEach(star => {\n    star.addEventListener('click', () => {\n      const rating = parseFloat(star.getAttribute('data-rating'));\n      selectedRating = rating;\n      updateRatingStars(rating);\n      if (ratingCurrent) ratingCurrent.textContent = rating.toFixed(1);\n    });\n\n    star.addEventListener('mouseenter', () => {\n      const rating = parseFloat(star.getAttribute('data-rating'));\n      updateRatingStars(rating);\n    });\n  });\n\n  // Reset stars on mouse leave\n  if (ratingStarsContainer) {\n    ratingStarsContainer.addEventListener('mouseleave', () => {\n      updateRatingStars(selectedRating);\n    });\n  }\n\n  // Close rating modal\n  if (ratingModalClose) {\n    ratingModalClose.addEventListener('click', closeRatingModal);\n  }\n\n  // Submit rating form\n  if (ratingForm) {\n    ratingForm.addEventListener('submit', async (e) => {\n      e.preventDefault();\n\n      if (!currentExercise) {\n        alert('No exercise selected');\n        return;\n      }\n\n      if (selectedRating === 0) {\n        alert('Please select a rating');\n        return;\n      }\n\n      const email = document.getElementById('rating-email').value.trim();\n      const comment = document.getElementById('rating-comment').value.trim();\n\n      if (!email || !comment) {\n        alert('Please fill in all fields');\n        return;\n      }\n\n      try {\n        const res = await fetch(`${API_BASE}/exercises/${currentExercise._id}/rating`, {\n          method: 'PATCH',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            rate: selectedRating,\n            email: email,\n            review: comment\n          })\n        });\n\n        if (!res.ok) {\n          throw new Error('Failed to submit rating');\n        }\n\n        const data = await res.json();\n        \n        // Save rating to localStorage\n        const ratings = JSON.parse(localStorage.getItem('ratings') || '[]');\n        ratings.push({\n          exerciseId: currentExercise._id,\n          exerciseName: currentExercise.name,\n          rating: selectedRating,\n          email: email,\n          comment: comment,\n          date: new Date().toISOString()\n        });\n        localStorage.setItem('ratings', JSON.stringify(ratings));\n\n        alert('Rating submitted successfully!');\n        closeRatingModal();\n        \n        if (selectedCategory) {\n          loadExercises();\n        }\n      } catch (err) {\n        console.error('Error submitting rating:', err);\n        alert('Failed to submit rating. Please try again.');\n      }\n    });\n  }\n\n  // === Pagination ===\n  function renderPagination(totalPages) {\n    pagination.innerHTML = '';\n    if (!totalPages || totalPages <= 1) return;\n\n    for (let i = 1; i <= totalPages; i++) {\n      const btn = document.createElement('button');\n      btn.className = 'page-btn';\n      btn.textContent = i;\n      if (i === currentPage) btn.classList.add('active');\n\n      btn.addEventListener('click', () => {\n        currentPage = i;\n        if (selectedCategory) {\n          loadExercises();\n        } else {\n          const activeTab = document.querySelector('.tab-btn.active');\n          const filterName = activeTab ? activeTab.textContent.trim() : 'Body parts';\n          loadFilters(filterName);\n        }\n      });\n\n      pagination.appendChild(btn);\n    }\n  }\n\n  // === Tab handling ===\n  tabs.forEach(tab => {\n    tab.addEventListener('click', () => {\n      tabs.forEach(t => t.classList.remove('active'));\n      tab.classList.add('active');\n\n      const filterName = tab.getAttribute('data-filter') || tab.textContent.trim();\n      currentPage = 1;\n      selectedCategory = null;\n      searchQuery = '';\n      if (searchInput) searchInput.value = '';\n      if (categoryTitle) categoryTitle.textContent = '';\n      loadFilters(filterName);\n    });\n  });\n\n  // === Search functionality ===\n  if (searchBtn && searchInput) {\n    const performSearch = () => {\n      searchQuery = searchInput.value.trim();\n      if (selectedCategory) {\n        currentPage = 1;\n        loadExercises();\n      }\n    };\n\n    searchBtn.addEventListener('click', performSearch);\n    searchInput.addEventListener('keypress', (e) => {\n      if (e.key === 'Enter') {\n        performSearch();\n      }\n    });\n  }\n\n  // === Subscription ===\n  if (subscribeForm) {\n    subscribeForm.addEventListener('submit', async (e) => {\n      e.preventDefault();\n      const emailInput = subscribeForm.querySelector('input[type=\"email\"]');\n      const email = emailInput?.value.trim();\n\n      if (!email) {\n        alert('Please enter your email');\n        return;\n      }\n\n      try {\n        const res = await fetch(`${API_BASE}/subscription`, {\n          method: 'POST',\n          headers: { 'Content-Type': 'application/json' },\n          body: JSON.stringify({ email })\n        });\n\n        const data = await res.json();\n        alert(data.message || 'Successfully subscribed!');\n        subscribeForm.reset();\n      } catch (err) {\n        console.error('Subscription error:', err);\n        alert('Failed to subscribe. Please try again later.');\n      }\n    });\n  }\n\n  // === Initialization ===\n  loadQuote();\n\n  if (categoryTitle) categoryTitle.textContent = '';\n\n  const defaultTab = Array.from(tabs).find(t => t.getAttribute('data-filter') === 'Body parts' || t.textContent.trim() === 'Body parts');\n  if (defaultTab) {\n    defaultTab.classList.add('active');\n    loadFilters('Body parts');\n  } else if (tabs.length > 0) {\n    tabs[0].classList.add('active');\n    const filterName = tabs[0].getAttribute('data-filter') || tabs[0].textContent.trim();\n    loadFilters(filterName);\n  }\n});"],"names":["menuToggle","mobileMenu","menuClose","link","API_BASE","grid","pagination","tabs","quoteText","quoteAuthor","subscribeForm","categoryTitle","searchInput","searchBtn","currentPage","limit","selectedCategory","currentFilterType","searchQuery","currentExercise","getFavorites","saveFavorites","favorites","isFavorite","exerciseId","fav","updateFavoriteButton","addFavoritesBtn","selectedRating","openRatingModal","ratingModal","closeExerciseModal","updateRatingStars","ratingCurrent","ratingForm","closeRatingModal","rating","star","index","loadQuote","res","data","err","loadFilters","filterName","encodedFilter","renderCategories","renderPagination","items","item","card","apiValue","imgURL","loadExercises","params","renderExercises","exercises","backBtn","activeTab","ex","e","openExerciseModal","exercise","modal","modalImg","modalName","modalRating","modalTarget","modalBodyPart","modalEquipment","modalPopularity","modalCalories","modalDescription","fullStars","hasHalfStar","starsDisplay","i","modalCloseBtn","modalOverlay","favoriteIndex","giveRatingBtn","ratingStarsInput","ratingStarsContainer","ratingModalClose","email","comment","ratings","totalPages","btn","tab","t","performSearch","defaultTab"],"mappings":"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"}