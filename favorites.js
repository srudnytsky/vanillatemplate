import"./assets/base-Dpa1oMr_.js";document.addEventListener("DOMContentLoaded",()=>{const h=document.querySelector(".menu-toggle"),s=document.querySelector(".mobile-menu"),C=document.querySelector(".mobile-menu-close");h&&s&&C&&(h.addEventListener("click",()=>{s.classList.add("active"),document.body.style.overflow="hidden"}),C.addEventListener("click",()=>{s.classList.remove("active"),document.body.style.overflow=""}),s.querySelectorAll(".mobile-menu-link").forEach(e=>{e.addEventListener("click",()=>{s.classList.remove("active"),document.body.style.overflow=""})}));const I="https://your-energy.b.goit.study/api",l=document.getElementById("favorites-content"),p=document.getElementById("fav-quote-text"),B=document.getElementById("fav-quote-author"),c=document.getElementById("subscribe-form");let m=null;function u(){try{return JSON.parse(localStorage.getItem("favorites"))||[]}catch{return[]}}function T(e){const o=u().filter(n=>n._id!==e);localStorage.setItem("favorites",JSON.stringify(o)),f()}function f(){const e=u();if(l){if(e.length===0){l.innerHTML=`
        <div class="no-favorites">
          <p>You haven't added any exercises to favorites yet.</p>
          <p>Go to the <a href="index.html" style="color: #EEA10C;">home page</a> to find exercises!</p>
        </div>
      `;return}l.innerHTML="",e.forEach(t=>{const o=document.createElement("div");o.className="exercise-card-horizontal";const n=t.rating||0;o.innerHTML=`
        <div class="exercise-card-left">
          <div class="workout-badge">
            WORKOUT ${n.toFixed(1)} ⭐
          </div>
          <div class="exercise-info">
            <h3>${t.name}</h3>
            <div class="exercise-details">
              <span><span class="label">Burned calories:</span> ${t.burnedCalories||0} / ${t.time||0} min</span>
              <span><span class="label">Body part:</span> ${t.bodyPart||""}</span>
              <span><span class="label">Target:</span> ${t.target||""}</span>
            </div>
          </div>
        </div>
        <button class="remove-favorite-btn" data-id="${t._id}">Remove</button>
      `,o.querySelector(".remove-favorite-btn").addEventListener("click",v=>{v.stopPropagation(),T(t._id)}),o.addEventListener("click",()=>{M(t)}),l.appendChild(o)})}}async function A(){try{const e=await fetch(`${I}/quote`);if(!e.ok)throw new Error("Network error");const t=await e.json();t?.quote&&t?.author?(p.textContent=t.quote,B.textContent=t.author):(p.textContent="Quote not available",B.textContent="")}catch(e){console.error("Error loading quote:",e),p.textContent="Failed to load quote"}}function M(e){const t=document.getElementById("exercise-modal");if(!t){createModalAndOpen(e);return}m=e;const o=document.getElementById("modal-exercise-img"),n=document.getElementById("modal-exercise-name"),i=document.getElementById("modal-rating-stars"),v=document.getElementById("modal-target"),S=document.getElementById("modal-body-part"),F=document.getElementById("modal-equipment"),q=document.getElementById("modal-popularity"),x=document.getElementById("modal-calories"),k=document.getElementById("modal-description-text");o&&(o.src=e.gifUrl||"https://via.placeholder.com/300x300?text=Exercise"),n&&(n.textContent=e.name||"");const b=e.rating||0,w=Math.floor(b),$=b%1>=.5;let y=`${b.toFixed(1)} `;for(let d=0;d<5;d++)d<w||d===w&&$?y+="⭐":y+="☆";i&&(i.textContent=y),v&&(v.textContent=e.target||""),S&&(S.textContent=e.bodyPart||""),F&&(F.textContent=e.equipment||""),q&&(q.textContent=e.popularity||"0"),x&&(x.textContent=`${e.burnedCalories||0}/${e.time||0} min`),k&&(k.textContent=e.description||"No description available.");const r=document.getElementById("modal-add-favorites");r&&(u().some(O=>O._id===e._id)?(r.innerHTML="Remove from favorites ♥",r.style.color="#EEA10C",r.style.borderColor="#EEA10C"):(r.innerHTML="Add to favorites ♡",r.style.color="#F4F4F4",r.style.borderColor="rgba(244, 244, 244, 0.2)")),t.classList.add("active"),document.body.style.overflow="hidden"}function g(){const e=document.getElementById("exercise-modal");e&&(e.classList.remove("active"),document.body.style.overflow="")}const L=document.getElementById("modal-close"),E=document.querySelector(".modal-overlay");L&&L.addEventListener("click",g),E&&E.addEventListener("click",e=>{e.target===E&&g()}),document.addEventListener("keydown",e=>{e.key==="Escape"&&g()});const a=document.getElementById("modal-add-favorites");a&&a.addEventListener("click",()=>{if(!m){alert("No exercise selected");return}const e=u(),t=m._id,o=e.findIndex(n=>n._id===t);o>-1?(e.splice(o,1),localStorage.setItem("favorites",JSON.stringify(e)),a.innerHTML="Add to favorites ♡",a.style.color="#F4F4F4",a.style.borderColor="rgba(244, 244, 244, 0.2)",alert("Removed from favorites!"),f()):(e.push(m),localStorage.setItem("favorites",JSON.stringify(e)),a.innerHTML="Remove from favorites ♥",a.style.color="#EEA10C",a.style.borderColor="#EEA10C",alert("Added to favorites!"),f())}),c&&c.addEventListener("submit",async e=>{e.preventDefault();const o=c.querySelector('input[type="email"]')?.value.trim();if(!o){alert("Please enter your email");return}try{const i=await(await fetch(`${I}/subscription`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:o})})).json();alert(i.message||"Successfully subscribed!"),c.reset()}catch(n){console.error("Subscription error:",n),alert("Failed to subscribe. Please try again later.")}}),A(),f()});
//# sourceMappingURL=favorites.js.map
