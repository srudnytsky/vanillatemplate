import"./assets/base-Dpa1oMr_.js";document.addEventListener("DOMContentLoaded",()=>{const q=document.querySelector(".menu-toggle"),c=document.querySelector(".mobile-menu"),F=document.querySelector(".mobile-menu-close");q&&c&&F&&(q.addEventListener("click",()=>{c.classList.add("active"),document.body.style.overflow="hidden"}),F.addEventListener("click",()=>{c.classList.remove("active"),document.body.style.overflow=""}),c.querySelectorAll(".mobile-menu-link").forEach(e=>{e.addEventListener("click",()=>{c.classList.remove("active"),document.body.style.overflow=""})}));const C="https://your-energy.b.goit.study/api",m=document.getElementById("favorites-content"),s=document.getElementById("fav-quote-text"),l=document.getElementById("fav-quote-author"),u=document.getElementById("subscribe-form");let i=null;function f(){const e=localStorage.getItem("favorites");return e?JSON.parse(e):[]}function x(e){localStorage.setItem("favorites",JSON.stringify(e))}function J(e){let t=f();t=t.filter(o=>o._id!==e),x(t),v()}function v(){if(!m)return;const e=f();if(e.length===0){m.innerHTML=`
        <div class="no-favorites">
          <p>It appears that you haven't added any exercises to your favorites yet. To get started, you can add exercises that you like to your favorites for easier access in the future.</p>
        </div>
      `;return}m.innerHTML="",e.forEach(t=>{const o=document.createElement("div");o.className="exercise-card-horizontal",t.rating,o.innerHTML=`
        <div class="favorite-card-header">
          <span class="workout-badge">WORKOUT</span>
          <button class="delete-icon" data-id="${t._id}" aria-label="Remove from favorites">
            ðŸ—‘
          </button>
        </div>
        
        <div class="exercise-info-wrapper">
          <div class="exercise-icon">âš¡</div>
          <div class="exercise-info">
            <h3>${t.name}</h3>
          </div>
        </div>
        
        <div class="exercise-details">
          <span><span class="label">Burned calories:</span> <span class="value">${t.burnedCalories||0} / ${t.time||0} min</span></span>
          <span><span class="label">Body part:</span> <span class="value">${t.bodyPart||""}</span></span>
          <span><span class="label">Target:</span> <span class="value">${t.target||""}</span></span>
        </div>
        
        <div class="favorite-card-footer">
          <button class="start-btn-fav" data-id="${t._id}">
            Start
            <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
              <path d="M12.172 7L6.808 1.636L8.222 0.222L16 8L8.222 15.778L6.808 14.364L12.172 9H0V7H12.172Z" fill="currentColor"/>
            </svg>
          </button>
        </div>
      `,m.appendChild(o)}),document.querySelectorAll(".delete-icon").forEach(t=>{t.addEventListener("click",o=>{o.stopPropagation();const n=t.getAttribute("data-id");confirm("Remove this exercise from favorites?")&&J(n)})}),document.querySelectorAll(".start-btn-fav").forEach(t=>{t.addEventListener("click",o=>{o.stopPropagation();const n=t.getAttribute("data-id"),a=e.find(r=>r._id===n);a&&V(a)})})}async function j(){try{const e=await fetch(`${C}/quote`);if(!e.ok)throw new Error("Network error");const t=await e.json();t?.quote&&t?.author?(s&&(s.textContent=t.quote),l&&(l.textContent=t.author)):(s&&(s.textContent="Quote not available"),l&&(l.textContent=""))}catch(e){console.error("Error loading quote:",e),s&&(s.textContent="A lot of times I find that people who are blessed with the most talent don't ever develop that attitude, and the ones who aren't blessed in that way are the most competitive and have the biggest heart."),l&&(l.textContent="Tom Brady")}}function V(e){const t=document.getElementById("exercise-modal");if(!t)return;i=e;const o=document.getElementById("modal-exercise-img"),n=document.getElementById("modal-exercise-name"),a=document.getElementById("modal-rating-stars"),r=document.getElementById("modal-target"),N=document.getElementById("modal-body-part"),O=document.getElementById("modal-equipment"),R=document.getElementById("modal-popularity"),_=document.getElementById("modal-calories"),H=document.getElementById("modal-description-text");o&&(o.src=e.gifUrl||"https://via.placeholder.com/300x300?text=Exercise"),n&&(n.textContent=e.name||"");const w=e.rating||0,D=Math.floor(w),U=w%1>=.5;let I=`${w.toFixed(1)} `;for(let L=0;L<5;L++)L<D||L===D&&U?I+="â­":I+="â˜†";a&&(a.textContent=I),r&&(r.textContent=e.target||""),N&&(N.textContent=e.bodyPart||""),O&&(O.textContent=e.equipment||""),R&&(R.textContent=e.popularity||"0"),_&&(_.textContent=`${e.burnedCalories||0}/${e.time||0} min`),H&&(H.textContent=e.description||"No description available."),S(e._id),t.classList.add("active"),document.body.style.overflow="hidden"}function g(){const e=document.getElementById("exercise-modal");e&&(e.classList.remove("active"),document.body.style.overflow="")}const k=document.getElementById("modal-close"),B=document.querySelector(".modal-overlay");k&&k.addEventListener("click",g),B&&B.addEventListener("click",e=>{e.target===B&&(g(),h())}),document.addEventListener("keydown",e=>{e.key==="Escape"&&(g(),h())});function S(e){const t=document.getElementById("modal-add-favorites");if(!t)return;f().some(a=>a._id===e)?(t.innerHTML="Remove from favorites â™¥",t.style.color="#EEA10C",t.style.borderColor="#EEA10C"):(t.innerHTML="Add to favorites â™¡",t.style.color="#F4F4F4",t.style.borderColor="rgba(244, 244, 244, 0.2)")}const A=document.getElementById("modal-add-favorites");A&&A.addEventListener("click",()=>{if(!i)return;const e=f(),t=i._id,o=e.findIndex(n=>n._id===t);o>-1?(e.splice(o,1),x(e),S(t),alert("Removed from favorites!"),v()):(e.push(i),x(e),S(t),alert("Added to favorites!"),v())});const y=document.getElementById("rating-modal"),T=document.getElementById("rating-modal-close"),p=document.getElementById("rating-form"),M=document.querySelectorAll(".star-input"),E=document.querySelector(".rating-current"),P=document.getElementById("modal-give-rating");let d=0;function Q(){y&&(g(),y.classList.add("active"),document.body.style.overflow="hidden",d=0,b(0),E&&(E.textContent="0.0"),p&&p.reset())}function h(){y&&(y.classList.remove("active"),document.body.style.overflow="")}function b(e){M.forEach(t=>{parseFloat(t.getAttribute("data-rating"))<=e?(t.classList.add("active"),t.textContent="â­"):(t.classList.remove("active"),t.textContent="â˜†")})}M.forEach(e=>{e.addEventListener("click",()=>{const t=parseFloat(e.getAttribute("data-rating"));d=t,b(t),E&&(E.textContent=t.toFixed(1))}),e.addEventListener("mouseenter",()=>{const t=parseFloat(e.getAttribute("data-rating"));b(t)})});const $=document.querySelector(".rating-stars-input");$&&$.addEventListener("mouseleave",()=>{b(d)}),P&&P.addEventListener("click",()=>{if(!i){alert("No exercise selected");return}Q()}),T&&T.addEventListener("click",h),p&&p.addEventListener("submit",async e=>{if(e.preventDefault(),!i){alert("No exercise selected");return}if(d===0){alert("Please select a rating");return}const t=document.getElementById("rating-email").value.trim(),o=document.getElementById("rating-comment").value.trim();if(!t||!o){alert("Please fill in all fields");return}try{const n=await fetch(`${C}/exercises/${i._id}/rating`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({rate:d,email:t,review:o})});if(!n.ok)throw new Error("Failed to submit rating");const a=await n.json(),r=JSON.parse(localStorage.getItem("ratings")||"[]");r.push({exerciseId:i._id,exerciseName:i.name,rating:d,email:t,comment:o,date:new Date().toISOString()}),localStorage.setItem("ratings",JSON.stringify(r)),alert("Rating submitted successfully!"),h()}catch(n){console.error("Error submitting rating:",n),alert("Failed to submit rating. Please try again.")}}),u&&u.addEventListener("submit",async e=>{e.preventDefault();const o=u.querySelector('input[type="email"]')?.value.trim();if(!o){alert("Please enter your email");return}try{const a=await(await fetch(`${C}/subscription`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:o})})).json();alert(a.message||"Successfully subscribed!"),u.reset()}catch(n){console.error("Subscription error:",n),alert("Failed to subscribe. Please try again later.")}}),j(),v()});
//# sourceMappingURL=favorites.js.map
