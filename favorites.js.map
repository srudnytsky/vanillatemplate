{"version":3,"file":"favorites.js","sources":["../src/js/favorites.js"],"sourcesContent":["// favorites.js\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n  // === MOBILE MENU ===\r\n  const menuToggle = document.querySelector('.menu-toggle');\r\n  const mobileMenu = document.querySelector('.mobile-menu');\r\n  const menuClose = document.querySelector('.mobile-menu-close');\r\n  \r\n  if (menuToggle && mobileMenu && menuClose) {\r\n    menuToggle.addEventListener('click', () => {\r\n      mobileMenu.classList.add('active');\r\n      document.body.style.overflow = 'hidden';\r\n    });\r\n    \r\n    menuClose.addEventListener('click', () => {\r\n      mobileMenu.classList.remove('active');\r\n      document.body.style.overflow = '';\r\n    });\r\n    \r\n    mobileMenu.querySelectorAll('.mobile-menu-link').forEach(link => {\r\n      link.addEventListener('click', () => {\r\n        mobileMenu.classList.remove('active');\r\n        document.body.style.overflow = '';\r\n      });\r\n    });\r\n  }\r\n\r\n  // === MAIN APP LOGIC ===\r\n  const API_BASE = 'https://your-energy.b.goit.study/api';\r\n\r\n  const favoritesContent = document.getElementById('favorites-content');\r\n  const quoteText = document.getElementById('fav-quote-text');\r\n  const quoteAuthor = document.getElementById('fav-quote-author');\r\n  const subscribeForm = document.getElementById('subscribe-form');\r\n\r\n  let currentExercise = null;\r\n\r\n  // === FAVORITES FUNCTIONS с диагностикой ===\r\n  function getFavorites() {\r\n    try {\r\n      // Пробуем получить из стандартного ключа\r\n      let favorites = localStorage.getItem('favorites');\r\n      \r\n      // Если нет, пробуем другие возможные ключи\r\n      if (!favorites) {\r\n        // Проверяем другие возможные ключи\r\n        const possibleKeys = ['favorites', 'fav', 'favouriteExercises', 'exerciseFavorites'];\r\n        for (let key of possibleKeys) {\r\n          const data = localStorage.getItem(key);\r\n          if (data) {\r\n            console.log('Найдены избранные в ключе:', key);\r\n            // Сохраняем в стандартный ключ для будущего использования\r\n            localStorage.setItem('favorites', data);\r\n            favorites = data;\r\n            break;\r\n          }\r\n        }\r\n      }\r\n      \r\n      // Пытаемся найти любые данные в localStorage, которые похожи на избранное\r\n      if (!favorites) {\r\n        for (let i = 0; i < localStorage.length; i++) {\r\n          const key = localStorage.key(i);\r\n          const value = localStorage.getItem(key);\r\n          try {\r\n            const parsed = JSON.parse(value);\r\n            if (Array.isArray(parsed) && parsed.length > 0 && parsed[0]._id) {\r\n              console.log('Найден массив избранного в ключе:', key);\r\n              localStorage.setItem('favorites', value);\r\n              favorites = value;\r\n              break;\r\n            }\r\n          } catch (e) {\r\n            // Не JSON, пропускаем\r\n          }\r\n        }\r\n      }\r\n      \r\n      return favorites ? JSON.parse(favorites) : [];\r\n    } catch (error) {\r\n      console.error('Ошибка чтения избранного:', error);\r\n      return [];\r\n    }\r\n  }\r\n\r\n  function saveFavorites(favorites) {\r\n    try {\r\n      localStorage.setItem('favorites', JSON.stringify(favorites));\r\n      console.log('Сохранено в localStorage:', favorites.length, 'элементов');\r\n    } catch (error) {\r\n      console.error('Ошибка сохранения:', error);\r\n    }\r\n  }\r\n\r\n  function removeFromFavorites(exerciseId) {\r\n    const favorites = getFavorites();\r\n    const updatedFavorites = favorites.filter(fav => fav._id !== exerciseId);\r\n    saveFavorites(updatedFavorites);\r\n    displayFavorites(); // Перерисовываем список\r\n  }\r\n\r\n  // === ОТОБРАЖЕНИЕ ИЗБРАННОГО ===\r\n  function displayFavorites() {\r\n    const favorites = getFavorites();\r\n    \r\n    console.log('Отображаем избранное:', favorites.length, 'элементов'); // Для отладки\r\n    \r\n    if (!favoritesContent) return;\r\n    \r\n    if (favorites.length === 0) {\r\n      favoritesContent.innerHTML = `\r\n        <div class=\"no-favorites\">\r\n          <p>You haven't added any exercises to favorites yet.</p>\r\n          <p>Go to the <a href=\"index.html\" style=\"color: #EEA10C;\">home page</a> to find exercises!</p>\r\n        </div>\r\n      `;\r\n      return;\r\n    }\r\n\r\n    favoritesContent.innerHTML = '';\r\n    \r\n    favorites.forEach(ex => {\r\n      const card = document.createElement('div');\r\n      card.className = 'exercise-card-horizontal';\r\n\r\n      const rating = ex.rating || 0;\r\n\r\n      card.innerHTML = `\r\n        <div class=\"exercise-card-left\">\r\n          <div class=\"workout-badge\">\r\n            WORKOUT ${rating.toFixed(1)} ⭐\r\n          </div>\r\n          <div class=\"exercise-info\">\r\n            <h3>${ex.name || 'Unnamed exercise'}</h3>\r\n            <div class=\"exercise-details\">\r\n              <span><span class=\"label\">Burned calories:</span> ${ex.burnedCalories || 0} / ${ex.time || 0} min</span>\r\n              <span><span class=\"label\">Body part:</span> ${ex.bodyPart || ''}</span>\r\n              <span><span class=\"label\">Target:</span> ${ex.target || ''}</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <button class=\"remove-favorite-btn\" data-id=\"${ex._id}\">Remove</button>\r\n      `;\r\n\r\n      // Кнопка удаления\r\n      const removeBtn = card.querySelector('.remove-favorite-btn');\r\n      removeBtn.addEventListener('click', (e) => {\r\n        e.stopPropagation();\r\n        removeFromFavorites(ex._id);\r\n      });\r\n\r\n      // Открытие модального окна при клике на карточку\r\n      card.addEventListener('click', () => {\r\n        openExerciseModal(ex);\r\n      });\r\n\r\n      favoritesContent.appendChild(card);\r\n    });\r\n  }\r\n\r\n  // === Load daily quote ===\r\n  async function loadQuote() {\r\n    try {\r\n      const res = await fetch(`${API_BASE}/quote`);\r\n      if (!res.ok) throw new Error('Network error');\r\n      const data = await res.json();\r\n      if (data?.quote && data?.author) {\r\n        quoteText.textContent = data.quote;\r\n        quoteAuthor.textContent = data.author;\r\n      } else {\r\n        quoteText.textContent = \"Quote not available\";\r\n        quoteAuthor.textContent = \"\";\r\n      }\r\n    } catch (err) {\r\n      console.error('Error loading quote:', err);\r\n      quoteText.textContent = \"Failed to load quote\";\r\n    }\r\n  }\r\n\r\n  // === Open Exercise Modal ===\r\n  function openExerciseModal(exercise) {\r\n    const modal = document.getElementById('exercise-modal');\r\n    if (!modal) {\r\n      alert('Modal window not found');\r\n      return;\r\n    }\r\n\r\n    currentExercise = exercise;\r\n\r\n    const modalImg = document.getElementById('modal-exercise-img');\r\n    const modalName = document.getElementById('modal-exercise-name');\r\n    const modalRating = document.getElementById('modal-rating-stars');\r\n    const modalTarget = document.getElementById('modal-target');\r\n    const modalBodyPart = document.getElementById('modal-body-part');\r\n    const modalEquipment = document.getElementById('modal-equipment');\r\n    const modalPopularity = document.getElementById('modal-popularity');\r\n    const modalCalories = document.getElementById('modal-calories');\r\n    const modalDescription = document.getElementById('modal-description-text');\r\n\r\n    if (modalImg) modalImg.src = exercise.gifUrl || 'https://via.placeholder.com/300x300?text=Exercise';\r\n    if (modalName) modalName.textContent = exercise.name || '';\r\n    \r\n    const rating = exercise.rating || 0;\r\n    const fullStars = Math.floor(rating);\r\n    const hasHalfStar = rating % 1 >= 0.5;\r\n    let starsDisplay = `${rating.toFixed(1)} `;\r\n    for (let i = 0; i < 5; i++) {\r\n      if (i < fullStars) {\r\n        starsDisplay += '⭐';\r\n      } else if (i === fullStars && hasHalfStar) {\r\n        starsDisplay += '⭐';\r\n      } else {\r\n        starsDisplay += '☆';\r\n      }\r\n    }\r\n    if (modalRating) modalRating.textContent = starsDisplay;\r\n    \r\n    if (modalTarget) modalTarget.textContent = exercise.target || '';\r\n    if (modalBodyPart) modalBodyPart.textContent = exercise.bodyPart || '';\r\n    if (modalEquipment) modalEquipment.textContent = exercise.equipment || '';\r\n    if (modalPopularity) modalPopularity.textContent = exercise.popularity || '0';\r\n    if (modalCalories) modalCalories.textContent = `${exercise.burnedCalories || 0}/${exercise.time || 0} min`;\r\n    if (modalDescription) modalDescription.textContent = exercise.description || 'No description available.';\r\n\r\n    // Обновляем кнопку избранного\r\n    const addFavoritesBtn = document.getElementById('modal-add-favorites');\r\n    if (addFavoritesBtn) {\r\n      const isFav = getFavorites().some(fav => fav._id === exercise._id);\r\n      if (isFav) {\r\n        addFavoritesBtn.innerHTML = 'Remove from favorites ♥';\r\n        addFavoritesBtn.style.color = '#EEA10C';\r\n        addFavoritesBtn.style.borderColor = '#EEA10C';\r\n      } else {\r\n        addFavoritesBtn.innerHTML = 'Add to favorites ♡';\r\n        addFavoritesBtn.style.color = '#F4F4F4';\r\n        addFavoritesBtn.style.borderColor = 'rgba(244, 244, 244, 0.2)';\r\n      }\r\n    }\r\n\r\n    modal.classList.add('active');\r\n    document.body.style.overflow = 'hidden';\r\n  }\r\n\r\n  // === Close Exercise Modal ===\r\n  function closeExerciseModal() {\r\n    const modal = document.getElementById('exercise-modal');\r\n    if (modal) {\r\n      modal.classList.remove('active');\r\n      document.body.style.overflow = '';\r\n    }\r\n  }\r\n\r\n  // === Modal event listeners ===\r\n  const modalCloseBtn = document.getElementById('modal-close');\r\n  const modalOverlay = document.querySelector('.modal-overlay');\r\n  \r\n  if (modalCloseBtn) {\r\n    modalCloseBtn.addEventListener('click', closeExerciseModal);\r\n  }\r\n  \r\n  if (modalOverlay) {\r\n    modalOverlay.addEventListener('click', (e) => {\r\n      if (e.target === modalOverlay) {\r\n        closeExerciseModal();\r\n      }\r\n    });\r\n  }\r\n\r\n  // Close modal on Escape key\r\n  document.addEventListener('keydown', (e) => {\r\n    if (e.key === 'Escape') {\r\n      closeExerciseModal();\r\n    }\r\n  });\r\n\r\n  // === Favorites button functionality in modal ===\r\n  const addFavoritesBtn = document.getElementById('modal-add-favorites');\r\n  if (addFavoritesBtn) {\r\n    addFavoritesBtn.addEventListener('click', () => {\r\n      if (!currentExercise) {\r\n        alert('No exercise selected');\r\n        return;\r\n      }\r\n\r\n      const favorites = getFavorites();\r\n      const exerciseId = currentExercise._id;\r\n      const favoriteIndex = favorites.findIndex(fav => fav._id === exerciseId);\r\n\r\n      if (favoriteIndex > -1) {\r\n        favorites.splice(favoriteIndex, 1);\r\n        saveFavorites(favorites);\r\n        addFavoritesBtn.innerHTML = 'Add to favorites ♡';\r\n        addFavoritesBtn.style.color = '#F4F4F4';\r\n        addFavoritesBtn.style.borderColor = 'rgba(244, 244, 244, 0.2)';\r\n        alert('Removed from favorites!');\r\n        displayFavorites(); // Обновляем список избранного\r\n      } else {\r\n        favorites.push(currentExercise);\r\n        saveFavorites(favorites);\r\n        addFavoritesBtn.innerHTML = 'Remove from favorites ♥';\r\n        addFavoritesBtn.style.color = '#EEA10C';\r\n        addFavoritesBtn.style.borderColor = '#EEA10C';\r\n        alert('Added to favorites!');\r\n        displayFavorites(); // Обновляем список избранного\r\n      }\r\n    });\r\n  }\r\n\r\n  // === Subscription ===\r\n  if (subscribeForm) {\r\n    subscribeForm.addEventListener('submit', async (e) => {\r\n      e.preventDefault();\r\n      const emailInput = subscribeForm.querySelector('input[type=\"email\"]');\r\n      const email = emailInput?.value.trim();\r\n\r\n      if (!email) {\r\n        alert('Please enter your email');\r\n        return;\r\n      }\r\n\r\n      try {\r\n        const res = await fetch(`${API_BASE}/subscription`, {\r\n          method: 'POST',\r\n          headers: { 'Content-Type': 'application/json' },\r\n          body: JSON.stringify({ email })\r\n        });\r\n\r\n        const data = await res.json();\r\n        alert(data.message || 'Successfully subscribed!');\r\n        subscribeForm.reset();\r\n      } catch (err) {\r\n        console.error('Subscription error:', err);\r\n        alert('Failed to subscribe. Please try again later.');\r\n      }\r\n    });\r\n  }\r\n\r\n  // === Диагностика localStorage ===\r\n  function debugLocalStorage() {\r\n    console.log('=== localStorage diagnostic ===');\r\n    console.log('localStorage length:', localStorage.length);\r\n    for (let i = 0; i < localStorage.length; i++) {\r\n      const key = localStorage.key(i);\r\n      const value = localStorage.getItem(key);\r\n      console.log(`Key: ${key}, Value length: ${value?.length}`);\r\n      try {\r\n        const parsed = JSON.parse(value);\r\n        if (Array.isArray(parsed)) {\r\n          console.log(`  → Это массив с ${parsed.length} элементами`);\r\n        }\r\n      } catch (e) {\r\n        // Не JSON\r\n      }\r\n    }\r\n    console.log('===============================');\r\n  }\r\n\r\n  // === Initialization ===\r\n  debugLocalStorage(); // Для отладки\r\n  loadQuote();\r\n  displayFavorites(); // Отображаем избранное при загрузке страницы\r\n});"],"names":["menuToggle","mobileMenu","menuClose","link","API_BASE","favoritesContent","quoteText","quoteAuthor","subscribeForm","currentExercise","getFavorites","favorites","possibleKeys","key","data","i","value","parsed","error","saveFavorites","removeFromFavorites","exerciseId","updatedFavorites","fav","displayFavorites","ex","card","rating","e","openExerciseModal","loadQuote","res","err","exercise","modal","modalImg","modalName","modalRating","modalTarget","modalBodyPart","modalEquipment","modalPopularity","modalCalories","modalDescription","fullStars","hasHalfStar","starsDisplay","addFavoritesBtn","closeExerciseModal","modalCloseBtn","modalOverlay","favoriteIndex","email","debugLocalStorage"],"mappings":"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"}